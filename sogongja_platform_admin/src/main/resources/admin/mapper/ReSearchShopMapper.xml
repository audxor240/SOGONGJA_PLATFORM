<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.stoneitgt.sogongja.admin.mapper.ReSearchShopMapper">

    <select id="getReSearchShopList" parameterType="map" resultType="com.stoneitgt.common.LowerKeyMap">
        /* file : ReSearchShopMapper.xml, id : getReSearchShopList */
        SELECT *
        FROM ST_RESEARCH_SHOP
        where 1=1

        <if test="keyword != null and keyword != ''">
            AND SHOP_NM LIKE CONCAT('%', #{keyword}, '%')
        </if>
        <if test="category1 != null and category1 != ''">
            AND CODE_TYPE1              = #{category1}
        </if>
        <if test="category2 != null and category2 != ''">
            AND CODE_TYPE2              = #{category2}
        </if>
        <if test="category3 != null and category3 != ''">
            AND CODE_TYPE3              = #{category3}
        </if>
        ORDER BY SHOP_SEQ DESC
        /*||ORDER BY SHOP_SEQ DESC||*/

    </select>

    <select id="getReSearchShopCategoty1" parameterType="int" resultType="com.stoneitgt.common.LowerKeyMap">
        /* file : ReSearchShopMapper.xml, id : getReSearchShopCategoty1 */
        select * from ST_RESEARCH_SHOP group by CODE_TYPE1;
    </select>

    <select id="getReSearchShopCategoty2" parameterType="string" resultType="com.stoneitgt.common.LowerKeyMap">
        /* file : ReSearchShopMapper.xml, id : getReSearchShopCategoty2 */
        select * from ST_RESEARCH_SHOP where CODE_TYPE2 LIKE CONCAT('%', #{category1}, '%') group by CODE_TYPE2;
    </select>

    <select id="getReSearchShopCategoty3" parameterType="string" resultType="com.stoneitgt.common.LowerKeyMap">
        /* file : ReSearchShopMapper.xml, id : getReSearchShopCategoty3 */
        select * from ST_RESEARCH_SHOP where CODE_TYPE3 LIKE CONCAT('%', #{category2}, '%') group by CODE_TYPE3;
    </select>

    <update id="deleteReSearchShop" parameterType="map" >
        /* file : EducationMapper.xml, id : deleteEducation */
        UPDATE ST_RESEARCH_SHOP
        SET DEL_FLAG     = 1
          , DEL_USER_SEQ = #{login_user_seq}
          , DEL_DATE     = CURRENT_TIMESTAMP()
        WHERE SHOP_SEQ      = #{shop_seq}
    </update>

    <select id="selectTotalRecords" resultType="int">
        SELECT FOUND_ROWS();
    </select>
</mapper>